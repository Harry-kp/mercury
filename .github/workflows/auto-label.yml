name: Auto Label Issues

on:
  issues:
    types: [opened, edited]
  pull_request:
    types: [opened, edited]

jobs:
  label:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    steps:
      - name: Label UI-related issues
        if: |
          contains(github.event.issue.title, 'UI') ||
          contains(github.event.issue.title, 'button') ||
          contains(github.event.issue.title, 'sidebar') ||
          contains(github.event.issue.title, 'panel') ||
          contains(github.event.issue.body, 'user interface')
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --repo ${{ github.repository }} \
            --add-label "ui"
      
      - name: Label parser-related issues
        if: |
          contains(github.event.issue.title, 'Postman') ||
          contains(github.event.issue.title, 'Insomnia') ||
          contains(github.event.issue.title, 'cURL') ||
          contains(github.event.issue.title, 'import') ||
          contains(github.event.issue.title, 'export')
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --repo ${{ github.repository }} \
            --add-label "parser"
      
      - name: Label performance issues
        if: |
          contains(github.event.issue.body, 'slow') ||
          contains(github.event.issue.body, 'performance') ||
          contains(github.event.issue.body, 'memory') ||
          contains(github.event.issue.body, 'lag') ||
          contains(github.event.issue.title, 'performance')
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --repo ${{ github.repository }} \
            --add-label "performance"
      
      - name: Label core issues
        if: |
          contains(github.event.issue.title, 'request') ||
          contains(github.event.issue.title, 'response') ||
          contains(github.event.issue.title, 'HTTP') ||
          contains(github.event.issue.title, 'auth') ||
          contains(github.event.issue.title, 'header')
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --repo ${{ github.repository }} \
            --add-label "core"
      
      - name: Label documentation issues
        if: |
          contains(github.event.issue.title, 'docs') ||
          contains(github.event.issue.title, 'documentation') ||
          contains(github.event.issue.title, 'README') ||
          contains(github.event.issue.labels.*.name, 'documentation')
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --repo ${{ github.repository }} \
            --add-label "documentation"
